{"layout":"article.njk","title":"Easy K8S Connectivity for Local Utils","date":"2023-06-06T03:00:00.000Z","formattedDate":"2023-6-6","source_link":"https://metalbear.co/blog/easy-k8s-connectivity-for-local-utils/","tags":["kubernetes"],"topics":[{"name":"Kubernetes","slug":"kubernetes"}],"content":"<h2>Easy K8S Connectivity for Local Utils</h2>\n<p>Are you tired of containerizing and deploying your applications to Kubernetes just to test or debug them? Look no further than mirrord, a CLI tool that allows you to run a program locally on your machine and forward network connections initiated by the program to the cluster. With mirrord&#39;s targetless mode, you can even access cluster-internal services that do not have any external IP.</p>\n<h3>Running utility programs with access to your cluster</h3>\n<p>When you run an application with mirrord, DNS resolution and network connection will be done from the cluster, allowing you to run tools locally for configuring or testing your services on the cluster. For example, you can use Kafka&#39;s console client to read events from an existing topic without containerizing, deploying, or setting up anything. Mirrord operates on the process level, so it doesn&#39;t affect connectivity for the rest of your system. You can even run multiple applications accessing different clusters or different namespaces at the same time.</p>\n<pre><code class=\"language-bash\">echo &#39;bootstrap.servers=kafka-bootstrap.kafka.svc.cluster.local:9092&#39; &gt; kafka-console-consumer.properties\nkafka-console-consumer --topic weather-updates --from-beginning --bootstrap-server kafka-bootstrap.kafka.svc.cluster.local:9092\n</code></pre>\n<h3>Access external services through the cluster</h3>\n<p>When you run an application with mirrord, the connections it initiates will be sent out of a temporary pod on your Kubernetes cluster. This means your application can connect not only to services in the cluster but to any endpoint on the internet that the cluster has access to. This can be useful if you want your application to communicate with external services that are configured to only accept communication from your cluster&#39;s IP address or if you want to test your cluster&#39;s network connectivity to external services.</p>\n<pre><code class=\"language-bash\">mirrord curl ifconfig.me\n</code></pre>\n<h3>Debugging new services with targetless mirrord</h3>\n<p>If you are working on a brand-new microservice that communicates with your existing microservices, you can&#39;t run it locally because its requests to the other microservices will fail, especially if addressed by cluster-internal domain names. With mirrord, you can run your app either from your IDE using the mirrord extension or from the command line, and when it makes requests to services on the cluster, they&#39;ll just work. You can iterate through changes in your application, rerunning it easily after each little change, and even set breakpoints in your IDE and debug your application while it is communicating as if it is running in your cluster.</p>\n<h3>Conclusion</h3>\n<p>Mirrord is a powerful tool that simplifies the process of testing and debugging applications in Kubernetes. With its targetless mode, you can run utility programs with access to your cluster, access external services through the cluster, and debug new services without containerizing or deploying anything. Install the mirrord CLI tool, or use it as a VS Code extension or a plugin for IntelliJ-based IDEs, and start using it today!</p>\n<p>For more information, check out the <a href=\"https://docs.mirrord.dev/\">mirrord docs</a>, and reach out to us on <a href=\"https://discord.gg/mirrord\">Discord</a> or <a href=\"https://github.com/mirrord-org\">GitHub</a> for help, questions, feedback, or just to say hi.</p>\n"}